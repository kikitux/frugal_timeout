require 'frugal_timeout'

FrugalTimeout.dropin!

timeout(1.0, Timeout::Error) {
  begin
    sleep 0.8;
    timeout(0.3, Timeout::Error) {
      begin
	sleep 0.2;
      rescue Timeout::Error;
	puts "0.3 expired"
      end
    };
    sleep 86400;
  rescue Timeout::Error;
    puts "1.0 expired"
  end
}
